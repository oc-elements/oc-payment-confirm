<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-button/paper-button.html">


<dom-module id="oc-payment-confirm">
    <template>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <style include="shop-button" is="custom-style">

            :host {
                display: block;
                background: #ffffff;
                color: #000;
            }

            .category-heading {
                border-top: 1px #cecece solid;
                border-bottom: 1px #cecece solid;
                background: #f8f8f8;
                color: #000;
            }

            h3 {
                font-size:1.13em !important;
                margin: 10px 0 !important;
            }

            .add-button {
                background-color: #e0992f;
                width: 100%;
                height: 50px;
                margin: 10px 0;
            }

            .accept-icon {
                --iron-icon-width: 64px;
                --iron-icon-height: 64px;
                color: green;
                font-size: 64px;
            }

        </style>
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12 category-heading">
                    <h3>Payment Success</h3>
                </div>
            </div>


            <div class="row">
                <div class="col-xs-4 pull-right">
                </div>
                <div class="col-xs-12">
                    <h5 class="text-center">[[organisationName]]</h5>
                    <p class="text-center">
                        <iron-icon class="accept-icon" icon="icons:check"></iron-icon>
                    </p>
                    <h1 class="text-center">Payment Received</h1>
                    <p>Thank you for your payment of R [[_twoDecimal(amount)]]</p>
                    <p class="text-uppercase">Sale #[[paymentId]] [[routeData.transactionId]]</p>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 details-header">
                    <p class=""><span class="text-uppercase">Description</span><span class="pull-right text-uppercase">Amount</span>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6">
                    Paid Amount
                </div>
                <div class="col-xs-6 text-right">
                    R [[_twoDecimal(amount)]]
                </div>

            </div>

            <p class="text-center">Thank you for your business</p>

            <div class="row category-heading">
                <div class="col-xs-12 text-center">
                    <paper-button class="primary add-button" on-tap="_redirect">Continue</paper-button>
                </div>
            </div>
        </div>
    </template>

    <script>
		/**
		 * `oc-payment-confirm`
		 * Payment Confirmation screen
		 *
		 * @customElement
		 * @polymer
		 * @demo demo/index.html
		 */
		class OcPaymentConfirm extends Polymer.Element {
			static get is() { return 'oc-payment-confirm'; }
			static get properties() {
				return {
					organisationName: {
						type: String
					},
					amount: {
						type: Number
					},
					paymentId: {
						type: String
					},
					method: {
						type: String
					},
					//this goes back up to parent element and resets the switch
					paymentSuccess: {
						type: Boolean
					}
				};
			}
			//Capatalizes a string
			_capatalize(string){
				return String(string).charAt(0).toUpperCase() + string.slice(1);

			}
			//Capatalizes a string
			_twoDecimal(amount){
				return parseFloat(Math.round(amount * 100) / 100).toFixed(2);

			}

			_redirect(){
				this.dispatchEvent(new CustomEvent('payment-confirmed', {
					bubbles: true, composed: true
				}));
			}
		}

		window.customElements.define(OcPaymentConfirm.is, OcPaymentConfirm);
    </script>
</dom-module>
